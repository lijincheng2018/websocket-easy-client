(function(){"use strict";var e={4694:function(e,t,r){var o=r(6369),n=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},s=[],l={name:"App"},i=l,c=r(1001),a=(0,c.Z)(i,n,s,!1,null,null,null),u=a.exports,f=r(2631),d=function(){var e=this,t=e._self._c;return t("el-main",[t("div",{staticStyle:{"text-align":"center","font-size":"25px","margin-bottom":"30px"}},[e._v("WebSocket Easy Client")]),t("el-form",{ref:"form",attrs:{model:e.form,"label-width":"180px"}},[t("el-form-item",{attrs:{label:"WebSocket服务端地址："}},[t("el-input",{attrs:{disabled:null!==e.socket},model:{value:e.form.serverAddress,callback:function(t){e.$set(e.form,"serverAddress",t)},expression:"form.serverAddress"}},[t("template",{slot:"prepend"},[e._v("ws://")]),t("el-button",{attrs:{slot:"append",icon:null===e.socket?"el-icon-link":"el-icon-error"},on:{click:function(t){null===e.socket?e.connetSever(e.form.serverAddress):e.disconnetSever()}},slot:"append"},[e._v(e._s(null===e.socket?"连接":"断开"))])],2)],1),t("el-form-item",{attrs:{label:"连接状态："}},[t("el-tag",{attrs:{type:null===e.socket?"danger":"success"}},[e._v(e._s(null===e.socket?"未连接":"已连接"))])],1),t("el-form-item",{attrs:{label:"发送信息："}},[t("el-input",{attrs:{disabled:null===e.socket},model:{value:e.form.clientMessage,callback:function(t){e.$set(e.form,"clientMessage",t)},expression:"form.clientMessage"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-position",disabled:null===e.socket},on:{click:function(t){return e.sendMessage(e.form.clientMessage)}},slot:"append"},[e._v("发送")])],1)],1),t("el-form-item",{attrs:{label:"服务器消息："}},[t("el-button",{attrs:{type:"primary",icon:"el-icon-delete",size:"medium"},on:{click:e.clearLogBox}},[e._v("清空消息")]),t("div",{staticClass:"serverLogBox"},[t("el-scrollbar",{ref:"myScrollbar",staticStyle:{height:"100%"}},[t("p",{domProps:{innerHTML:e._s(e.form.serverLog)}})])],1)],1)],1)],1)},p=[],m=r(8499),g=r.n(m),b={data(){return{form:{serverAddress:"localhost:8110",serverLog:"",clientMessage:"请先连接服务器哦~"},socket:null}},methods:{getDate(){let e=new Date,t=e.getFullYear(),r=e.getMonth()+1,o=e.getDate(),n=e.getHours();n=n<10?"0"+n:n;let s=e.getMinutes();s=s<10?"0"+s:s;let l=e.getSeconds();return l=l<10?"0"+l:l,`${t}/${r}/${o} ${n}:${s}:${l}`},scrollDown(){this.$refs["myScrollbar"].wrap.scrollTop=this.$refs["myScrollbar"].wrap.scrollHeight},clearLogBox(){this.form.serverLog="",this.$message.success("清空消息成功~")},connetSever(e){const t=e=>{let t=m.Loading.service({text:"连接服务器中，请稍后...",background:"rgba(0,0,0,.5)"});const r=new WebSocket("ws://"+e);let o=r;return r.addEventListener("open",(()=>{console.log("success"),this.form.serverLog+="["+this.getDate()+']<span style="color: green"> 连接服务器成功！</span><br>',this.form.clientMessage=""})),r.addEventListener("error",(()=>{console.error("error"),this.form.serverLog+="["+this.getDate()+']<span style="color: red"> 连接服务器失败！</span><br>',o=null,this.socket=null,t.close()})),t.close(),o};this.socket=t(e),this.socket.onmessage=e=>{let t=this.getDate(),r=e.data.toString();console.log(r),this.form.serverLog+="["+t+']<span style="color: purple"> 接收到：'+r+"</span><br>"}},disconnetSever(){this.socket.close(),this.form.serverLog+="["+this.getDate()+']<span style="color: orange"> 断开服务器成功！</span><br>',this.socket=null,this.form.clientMessage="请先连接服务器哦~"},sendMessage(e){this.socket.send(e),this.form.serverLog+="["+this.getDate()+']<span style="color: blue"> 发送：'+e+"</span><br>",this.form.clientMessage=""},sendMessageToClient(e,t){const r=new Promise(((r,o)=>{e.onerror=function(){o(new Error("WebSocket error"))},e.onclose=function(){o(new Error("WebSocket closed"))},e.onopen=function(){e.send(t),r("Message sent")}}));return r}},updated(){this.scrollDown()},beforeDestroy(){this.socket.close()}},v=b,h=(0,c.Z)(v,d,p,!1,null,"2b3bf46e",null),k=h.exports;o["default"].use(f.Z);var y=new f.Z({routes:[{path:"/",name:"Dashboard",component:k,meta:{title:"WebSocket Easy Client"}},{path:"/index",name:"Dashboard",component:k,meta:{title:"WebSocket Easy Client"}}]});o["default"].config.productionTip=!1,o["default"].use(f.Z),o["default"].use(g()),new o["default"]({el:"#app",router:y,render:e=>e(u)}).$mount("#app")}},t={};function r(o){var n=t[o];if(void 0!==n)return n.exports;var s=t[o]={id:o,loaded:!1,exports:{}};return e[o](s,s.exports,r),s.loaded=!0,s.exports}r.m=e,function(){r.amdO={}}(),function(){var e=[];r.O=function(t,o,n,s){if(!o){var l=1/0;for(u=0;u<e.length;u++){o=e[u][0],n=e[u][1],s=e[u][2];for(var i=!0,c=0;c<o.length;c++)(!1&s||l>=s)&&Object.keys(r.O).every((function(e){return r.O[e](o[c])}))?o.splice(c--,1):(i=!1,s<l&&(l=s));if(i){e.splice(u--,1);var a=n();void 0!==a&&(t=a)}}return t}s=s||0;for(var u=e.length;u>0&&e[u-1][2]>s;u--)e[u]=e[u-1];e[u]=[o,n,s]}}(),function(){r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,{a:t}),t}}(),function(){r.d=function(e,t){for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){r.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};r.O.j=function(t){return 0===e[t]};var t=function(t,o){var n,s,l=o[0],i=o[1],c=o[2],a=0;if(l.some((function(t){return 0!==e[t]}))){for(n in i)r.o(i,n)&&(r.m[n]=i[n]);if(c)var u=c(r)}for(t&&t(o);a<l.length;a++)s=l[a],r.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return r.O(u)},o=self["webpackChunkwebsocket_easy_client"]=self["webpackChunkwebsocket_easy_client"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=r.O(void 0,[998],(function(){return r(4694)}));o=r.O(o)})();
//# sourceMappingURL=app.9fe791cb.js.map